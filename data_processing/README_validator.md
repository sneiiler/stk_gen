# å«æ˜Ÿåˆ†ç°‡ç»“æœéªŒè¯å™¨ä½¿ç”¨è¯´æ˜

## æ¦‚è¿°

`SatelliteClusterValidator` æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºéªŒè¯å¤§æ¨¡å‹ç”Ÿæˆçš„å«æ˜Ÿåˆ†ç°‡ç»“æœçš„éªŒè¯å™¨ã€‚å®ƒèƒ½å¤Ÿæ£€æŸ¥è¾“å‡ºç»“æœæ˜¯å¦ç¬¦åˆä¸šåŠ¡è§„åˆ™å’Œçº¦æŸæ¡ä»¶ï¼Œç¡®ä¿åˆ†ç°‡ç»“æœçš„å¯é æ€§å’Œæœ‰æ•ˆæ€§ã€‚

## ä¸»è¦åŠŸèƒ½

### 1. åŸºç¡€æ ¼å¼éªŒè¯
- æ£€æŸ¥è¾“å‡ºæ˜¯å¦åŒ…å«å¿…éœ€çš„ `clusters` å­—æ®µ
- éªŒè¯æ¯ä¸ªé›†ç¾¤æ˜¯å¦åŒ…å«å¿…éœ€çš„å­—æ®µï¼š`cluster_id`ã€`master`ã€`sats`ã€`targets`
- æ£€æŸ¥æ•°æ®ç±»å‹æ˜¯å¦æ­£ç¡®

### 2. ç›®æ ‡è¦†ç›–éªŒè¯
- ç¡®ä¿æ‰€æœ‰è¾“å…¥ç›®æ ‡éƒ½è¢«æ­£ç¡®è¦†ç›–
- æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸å­˜åœ¨çš„ç›®æ ‡
- è®¡ç®—ç›®æ ‡è¦†ç›–ç‡

### 3. å«æ˜Ÿåˆ†é…éªŒè¯
- æ£€æŸ¥å«æ˜Ÿæ˜¯å¦è¢«é‡å¤åˆ†é…
- éªŒè¯æ˜¯å¦å­˜åœ¨ä¸å­˜åœ¨çš„å«æ˜Ÿ
- è®¡ç®—å«æ˜Ÿåˆ©ç”¨ç‡

### 4. ä¸»èŠ‚ç‚¹éªŒè¯
- ç¡®ä¿ä¸»èŠ‚ç‚¹åœ¨å«æ˜Ÿåˆ—è¡¨ä¸­
- æ£€æŸ¥ä¸»èŠ‚ç‚¹æ˜¯å¦è¢«é‡å¤ä½¿ç”¨

### 5. ç­–ç•¥çº¦æŸéªŒè¯
- æ ¹æ®ç­–ç•¥ç±»å‹ï¼ˆ`balanced`/`quality`ï¼‰éªŒè¯å«æ˜Ÿæ•°é‡çº¦æŸ
- æ£€æŸ¥ç©ºé›†ç¾¤

### 6. é“¾è·¯è´¨é‡éªŒè¯
- è®¡ç®—é›†ç¾¤å†…å¹³å‡é“¾è·¯å¼ºåº¦
- è¯†åˆ«é“¾è·¯è´¨é‡è¾ƒä½çš„é›†ç¾¤

### 7. è§‚æµ‹è´¨é‡éªŒè¯
- è®¡ç®—é›†ç¾¤çš„å¹³å‡è§‚æµ‹è´¨é‡
- è¯†åˆ«è§‚æµ‹è´¨é‡è¾ƒä½çš„é›†ç¾¤

### 8. å¥åº·åº¦éªŒè¯
- æ£€æŸ¥ä¸»èŠ‚ç‚¹å¥åº·åº¦
- è®¡ç®—é›†ç¾¤æ•´ä½“å¥åº·åº¦

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```python
from data_processing.data_validator import SatelliteClusterValidator, ValidationResult

# åˆ›å»ºéªŒè¯å™¨å®ä¾‹
validator = SatelliteClusterValidator()

# éªŒè¯è¾“å‡ºç»“æœ
result = validator.validate_output(output_data, input_data)

# æ£€æŸ¥éªŒè¯ç»“æœ
if result.is_valid:
    print("éªŒè¯é€šè¿‡")
else:
    print("éªŒè¯å¤±è´¥")
    for error in result.errors:
        print(f"é”™è¯¯: {error}")
    
    for warning in result.warnings:
        print(f"è­¦å‘Š: {warning}")
```

### ä½¿ç”¨ä¾¿æ·å‡½æ•°

```python
from data_processing.data_validator import validate_satellite_clustering, generate_report

# ç›´æ¥éªŒè¯
result = validate_satellite_clustering(output_data, input_data)

# ç”ŸæˆéªŒè¯æŠ¥å‘Š
report = generate_report(result)
print(report)
```

### å¸¦æ—¥å¿—çš„éªŒè¯

```python
import logging
from data_processing.data_validator import SatelliteClusterValidator

# è®¾ç½®æ—¥å¿—
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# åˆ›å»ºå¸¦æ—¥å¿—çš„éªŒè¯å™¨
validator = SatelliteClusterValidator(logger)
result = validator.validate_output(output_data, input_data)
```

## è¾“å…¥æ•°æ®æ ¼å¼

### è¾“å…¥æ•°æ® (input_data)
```json
{
    "timestamp": "2025-06-27T01:41:21Z",
    "strategy": "quality",
    "sat_attrs": [
        {
            "id": 132,
            "health": 0.87,
            "pos": [5231.847, -1289.387, -2519.124]
        }
    ],
    "sat_edges": [
        {
            "from": 125,
            "to": 166,
            "w": 0.94
        }
    ],
    "target_edges": [
        {
            "from": 116,
            "to": 5,
            "q": 0.86
        }
    ]
}
```

### è¾“å‡ºæ•°æ® (output_data)
```json
{
    "clusters": [
        {
            "cluster_id": 1,
            "master": 125,
            "sats": [125, 166, 165],
            "targets": [2]
        }
    ]
}
```

## éªŒè¯ç»“æœ

### ValidationResult ç»“æ„
```python
@dataclass
class ValidationResult:
    is_valid: bool          # éªŒè¯æ˜¯å¦é€šè¿‡
    errors: List[str]       # é”™è¯¯ä¿¡æ¯åˆ—è¡¨
    warnings: List[str]     # è­¦å‘Šä¿¡æ¯åˆ—è¡¨
    details: Dict[str, Any] # è¯¦ç»†ä¿¡æ¯
```

### è¯¦ç»†ä¿¡æ¯å­—æ®µ
- `target_coverage`: ç›®æ ‡è¦†ç›–ä¿¡æ¯
  - `input_targets`: è¾“å…¥ç›®æ ‡æ•°é‡
  - `output_targets`: è¾“å‡ºç›®æ ‡æ•°é‡
  - `coverage_rate`: è¦†ç›–ç‡

- `satellite_assignment`: å«æ˜Ÿåˆ†é…ä¿¡æ¯
  - `total_satellites`: æ€»å«æ˜Ÿæ•°é‡
  - `assigned_satellites`: å·²åˆ†é…å«æ˜Ÿæ•°é‡
  - `utilization_rate`: åˆ©ç”¨ç‡

- `link_quality`: é“¾è·¯è´¨é‡ä¿¡æ¯
  - `overall_avg_strength`: æ•´ä½“å¹³å‡é“¾è·¯å¼ºåº¦
  - `cluster_count`: é›†ç¾¤æ•°é‡

- `observation_quality`: è§‚æµ‹è´¨é‡ä¿¡æ¯
  - `overall_avg_quality`: æ•´ä½“å¹³å‡è§‚æµ‹è´¨é‡
  - `cluster_count`: é›†ç¾¤æ•°é‡

## éªŒè¯è§„åˆ™

### é”™è¯¯çº§åˆ«é—®é¢˜
1. **è¾“å‡ºæ ¼å¼é”™è¯¯**: ç¼ºå°‘å¿…éœ€å­—æ®µæˆ–æ•°æ®ç±»å‹é”™è¯¯
2. **ç›®æ ‡è¦†ç›–ä¸å®Œæ•´**: ç¼ºå°‘ç›®æ ‡æˆ–åŒ…å«ä¸å­˜åœ¨çš„ç›®æ ‡
3. **å«æ˜Ÿé‡å¤åˆ†é…**: åŒä¸€å«æ˜Ÿè¢«åˆ†é…åˆ°å¤šä¸ªé›†ç¾¤
4. **ä¸»èŠ‚ç‚¹é”™è¯¯**: ä¸»èŠ‚ç‚¹ä¸åœ¨å«æ˜Ÿåˆ—è¡¨ä¸­æˆ–è¢«é‡å¤ä½¿ç”¨
5. **ç©ºé›†ç¾¤**: é›†ç¾¤æ²¡æœ‰å«æ˜Ÿ

### è­¦å‘Šçº§åˆ«é—®é¢˜
1. **å«æ˜Ÿåˆ©ç”¨ç‡ä½**: æœ‰æœªä½¿ç”¨çš„å«æ˜Ÿ
2. **ç­–ç•¥çº¦æŸè¿å**: å«æ˜Ÿæ•°é‡è¶…è¿‡ç­–ç•¥é™åˆ¶
3. **é“¾è·¯è´¨é‡ä½**: å¹³å‡é“¾è·¯å¼ºåº¦ä½äº0.3
4. **è§‚æµ‹è´¨é‡ä½**: å¹³å‡è§‚æµ‹è´¨é‡ä½äº0.5
5. **å¥åº·åº¦ä½**: ä¸»èŠ‚ç‚¹å¥åº·åº¦ä½äº0.7æˆ–é›†ç¾¤å¹³å‡å¥åº·åº¦ä½äº0.6

## ç¤ºä¾‹æŠ¥å‘Š

```
==================================================
å«æ˜Ÿåˆ†ç°‡ç»“æœéªŒè¯æŠ¥å‘Š
==================================================
éªŒè¯çŠ¶æ€: âœ… é€šè¿‡

âš ï¸ è­¦å‘Šä¿¡æ¯:
  - é›†ç¾¤ 3 å¹³å‡é“¾è·¯å¼ºåº¦è¾ƒä½: 0.285
  - é›†ç¾¤ 5 ä¸»èŠ‚ç‚¹ 114 å¥åº·åº¦è¾ƒä½: 0.650

ğŸ“Š è¯¦ç»†ä¿¡æ¯:
  target_coverage:
    input_targets: 25
    output_targets: 25
    coverage_rate: 1.0
  satellite_assignment:
    total_satellites: 25
    assigned_satellites: 20
    utilization_rate: 0.8
  link_quality:
    overall_avg_strength: 0.623
    cluster_count: 7
  observation_quality:
    overall_avg_quality: 0.712
    cluster_count: 7

==================================================
```

## æ³¨æ„äº‹é¡¹

1. **æ€§èƒ½è€ƒè™‘**: éªŒè¯å™¨ä¼šéå†æ‰€æœ‰æ•°æ®ï¼Œå¯¹äºå¤§è§„æ¨¡æ•°æ®é›†å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
2. **å†…å­˜ä½¿ç”¨**: éªŒè¯è¿‡ç¨‹ä¸­ä¼šåˆ›å»ºå¤šä¸ªæ˜ å°„è¡¨ï¼Œæ³¨æ„å†…å­˜ä½¿ç”¨
3. **é”™è¯¯å¤„ç†**: éªŒè¯å™¨ä¼šæ•è·å¼‚å¸¸å¹¶è®°å½•åˆ°æ—¥å¿—ä¸­
4. **æ‰©å±•æ€§**: å¯ä»¥é€šè¿‡ç»§æ‰¿ `SatelliteClusterValidator` ç±»æ¥æ·»åŠ è‡ªå®šä¹‰éªŒè¯è§„åˆ™

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å¯¼å…¥é”™è¯¯**: ç¡®ä¿ `data_processing` ç›®å½•åœ¨ Python è·¯å¾„ä¸­
2. **ç±»å‹é”™è¯¯**: æ£€æŸ¥è¾“å…¥æ•°æ®çš„ç±»å‹å’Œæ ¼å¼
3. **å†…å­˜ä¸è¶³**: å¯¹äºå¤§æ•°æ®é›†ï¼Œè€ƒè™‘åˆ†æ‰¹å¤„ç†
4. **æ—¥å¿—é…ç½®**: ç¡®ä¿æ—¥å¿—è®°å½•å™¨æ­£ç¡®é…ç½®

### è°ƒè¯•å»ºè®®

1. ä½¿ç”¨è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºæ¥è·Ÿè¸ªéªŒè¯è¿‡ç¨‹
2. æ£€æŸ¥éªŒè¯ç»“æœçš„è¯¦ç»†ä¿¡æ¯å­—æ®µ
3. é€æ­¥éªŒè¯å„ä¸ªéªŒè¯æ­¥éª¤
4. ä½¿ç”¨æµ‹è¯•æ•°æ®éªŒè¯åŠŸèƒ½ 